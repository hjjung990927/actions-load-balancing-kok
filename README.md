# KOK |<a> 경험 중심 체험 플랫폼 </a>

## 🖥️ 프로젝트 소개

KOK은 기업의 단기 공백(휴가, 연차, 출장 등)으로 생긴 빈자리를 직접 체험해볼 수 있는 실무 체험 플랫폼입니다. <br>
체험을 통해 인턴십 또는 정식 채용으로 연계될 수 있으며,
회원 간 커뮤니티로 경험을 공유하고 성장하는 생태계를 지향합니다.

<img width="602" height="305" alt="서비스소개" src="https://github.com/user-attachments/assets/fc058dfc-4f48-4d35-99fe-c2c4c30f4b84" />

<br>

## 🕰️ 개발 기간

-   25.09.19일 - 25.10.12일

<br>

## ✨ 기획배경

요즘 20대에게 ‘취업’은 단순히 일자리를 얻는 게 아니라, 스스로 어떤 일을 잘할 수 있고, 어떤 직무가 나에게 맞는지를 찾아가는 과정이 되었다 생각합니다.

하지만 현실은 실무 경험을 쌓을 기회가 많지 않아, “경험이 없으니 지원하기 어렵고, 지원하지 않으면 경험을 쌓을 수 없는” 문제에 놓여 있는 20대들이 많습니다.

저 역시 같은 고민을 겪으며, 지식이 아닌 **진짜 경험을 통해 배우는 플랫폼**이 필요하다고 느꼈습니다.

그래서 저희 팀은 기업의 단기 공백을 청년들의 도전 기회로 바꾸는 플랫폼 **KOK(콕)** 을 기획했습니다.

**KOK(콕)** 은 **체험 일자리에 콕 들어간다**는 의미를 담고 있습니다.

청년이 직접 기업의 자리 속으로 **콕** 들어가 실무를 체험하고, 자신이 원하는 직무를 실제로 느껴보며, 그 과정에서 자신감과 방향성을 찾을 수 있도록 설계했습니다.

KOK은 단순한 구인·구직 플랫폼이 아니라,
- 실무를 통해 배우고 성장하며,
- 커뮤니티에서 경험을 나누고,
- 새로운 도전을 통해 용기와 가능성을 확장하는 **경험 중심 성장 플랫폼**입니다.

즉, KOK은 20대가 실무에 **콕** 들어가 경험하고, 배움과 도전을 통해 성장할 수 있는 첫 걸음을 목표로 하고 있습니다.




<img width="587" height="324" alt="기획배경" src="https://github.com/user-attachments/assets/b02aca83-ed03-4f0f-8cc3-a252743e57ef" />

<br>

## ✨ 프로젝트 목적

1. **실무 중심 체험 매칭**: 기업의 근무 공백을 활용해 회원이 직무를 직접 경험할 수 있습니다.

2. **채용 연계 시스템**: 체험 이후 기업의 평가를 통해 인턴십 또는 정식 채용으로 연결됩니다.

3. **커뮤니티 네트워킹**: 회원 간 체험 후기와 직무 정보등을 공유하며 커리어 성장을 도모합니다.

4. **역할별 맞춤 서비스**: 일반 회원, 기업 회원, 관리자 각각에 맞는 기능을 제공합니다.

<br>

## ✨ 기대 효과

1. **체험공고**: 다양한 직무를 직접 경험하며, 책이나 강의로는 얻기 어려운 실무 감각을 쌓을 수 있습니다.

2. **인턴공고**: 짧은 체험 경험이 채용으로 자연스럽게 이어지는 기회의 흐름을 제공합니다.

3. **커뮤니티**: 경험을 공유하고 연결하며 새로운 기회와 배움을 만들어가는 장을 제공합니다.

<img width="612" height="325" alt="기대효과" src="https://github.com/user-attachments/assets/a8168463-aa4b-42ed-acb1-4e5ea8ac962b" />

<br>

## 🛠️ 기술 스택 (Tech Stack)

| 구분 | 사용 기술 |
|------|------------|
| **HTML Engine** | Thymeleaf |
| **Frontend** | HTML, JavaScript, CSS |
| **Backend** | Spring Boot, Java |
| **Database** | PostgreSQL, Redis |
| **Infra** | AWS EC2, AWS IAM, AWS S3 |
| **Development Tools** | VS Code, IntelliJ IDEA |
| **API & Library** | Kakao Login, SMTP Gmail API, REST API, Lombok, MyBatis, OAuth 2.0, Google Login, Boot Pay, Naver Login, JWT, Spring Security, CoolSMS, Swagger UI |
| **Collaboration & Version Control** | Git, GitHub, Slack, Postman, Sourcetree |
| **Testing** | JUnit5 |

<br>

## 📌 담당 업무

### ⚙️ Front-End

#### 🔍 메인 페이지

-   헤더
-   지원 내역
-   사이드 바
-   검색 창
-   고객 지원
-   설정 창
-   404 에러 페이지
-   모바일 헤더
-   모바일 사이드 바
-   모바일 푸터

#### 🔍 관리자 페이지

-   관리자 로그인
-   관리자 등록
-   홈 화면
-   회원 목록 및 상세
-   기업 목록 및 상세
-   체험공고 목록 및 상세
-   인턴공고 목록 및 상세
-   광고 등록 신청 목록 및 상세
-   배너 등록
-   광고비 결제 내역
-   체험비 결제 내역
-   신고 게시글 목록 및 상세
-   공지사항 목록 및 상세
-   공지사항 작성

#### 🎯 진척도
<img width="412" height="248" alt="화면진척도" src="https://github.com/user-attachments/assets/efce781b-2398-4392-aed5-ecf284221545" />

<br>

### ⚙️ Back-End

#### 🔍 커뮤니티 페이지: 게시글 목록

▶ Criteria 기반의 무한 스크롤 페이징 구현

▶ 게시글별 댓글 수, 좋아요 수, 상대 시간(relative time) 표시

▶ AWS S3 이미지에 대해 `Pre-Signed URL` 적용으로 보안 및 유효시간 제어

▶ 로그인 시 본인 게시글 여부(Owner) 및 좋아요 상태 판별

▶ 불필요한 DB 호출 감소를 위해 캐싱 `(@Cacheable)` 적용

#### 📷 View

-   게시글 목록
-   게시글 작성

#### 🔍 커뮤니티 페이지: 게시글 상세

▶ REST 기반 비동기 상세 조회

▶ 좋아요 기능은 등록/취소 API를 분리하여 `RESTful`하게 설계하고, `(@CacheEvict)`로 캐시 정합성을 유지

▶ 게시글 신고는 중복 신고 방지 로직과 데이터 무결성을 보장을 위해 `(@Transactional)` 적용

▶ 댓글/대댓글 `CRUD 기능` 적용 (작성, 조회, 수정, 삭제)

#### 📷 View

-   게시글 상세
-   게시글 좋아요
-   게시글 신고
-   댓글/대댓글 목록
-   댓글/대댓글 작성/수정/삭제

#### 🔍 커뮤니티 페이지: 게시글 작성/수정/삭제

▶ AWS S3 파일 업로드/삭제 처리

▶ 게시글 + 파일의 데이터 정합성 보장을 위해 `(@Transactional)` 적용

#### 📷 View

-   게시글 작성
-   게시글 수정
-   게시글 삭제

#### 🔍 기업 페이지: 기업 목록

▶ Criteria 기반의 무한 스크롤 페이징 구현

▶ 기업명, 키워드, 조건을 활용한 기업 검색 기능 제공

▶ AWS S3에 저장된 기업 프로필/배경 이미지를 `Pre-Signed URL`로 로딩

▶ 검색 + 목록 조회 시 CompaniesCriteriaDTO를 통해 목록 + 페이징 정보 일괄 전달

▶ 목록 조회 중 예외 발생 시 롤백 처리를 위해 `(@Transactional)` 적용

#### 📷 View

-   기업 목록
-   기업 검색

#### 🔍 기업 페이지: 기업 상세

▶ findCompanyById() 를 통해 기업 정보 + 팔로워 수 + 공고 개수 + 규모 등 종합 정보 조회

▶ 프로필 이미지 / 배경 이미지는 `Pre-Signed URL`로 제한적 접근 제공

▶ 팔로우 기능을 통해 기업 관심 기능 제공 (로그인/권한 검사 후 토글)

▶ 기업별 체험/인턴 공고 목록 및 검색 기능 제공

▶ 공고 목록 조회 시 CompanyNoticeCriteria를 통한 페이징 처리

#### 📷 View

-   기업 상세
-   기업 팔로우
-   기업별 체험/인턴 공고 목록
-   기업별 체험/인턴 공고 검색

#### 🎯 진척도
<img width="782" height="171" alt="서버진척도" src="https://github.com/user-attachments/assets/3e68375a-65b7-4a5f-a19d-bfa45e57c3ef" />

<br>

#### 🗄️ ERD
<img width="8346" height="6562" alt="diagram" src="https://github.com/user-attachments/assets/aa5ba920-e272-40c3-a987-c2613ac0aaf8" />

<br>

## 🚨 오류 사항과 해결 방안
### **📌 1. ERD의 흐름을 정확히 파악하자**

#### **💥문제 상황**
-  AWS S3 Presigner 호출 시 key 값이 null로 확인
   <img width="1168" height="314" alt="S3에서 불러오기 실패" src="https://github.com/user-attachments/assets/9364afef-021d-41da-ad8c-effcb76f3a00" />

#### **🔍문제 원인**

-   파일 업로드 과정에서 PostFileDTO에는 값이 들어가고 있었으나, FileDTO에는 데이터가 저장되지 않아 S3 Key가 null로 반환되는 문제가 발생했습니다.

#### **✅ 해결 방안**
<img width="616" height="572" alt="image" src="https://github.com/user-attachments/assets/ece1b3b8-2ee2-466b-a854-11dfd97fed58" />

<br>

-   파일 업로드 로직에 **FileDTO 저장 처리를 추가**하고 이후 **PostFileDTO와 매핑**하도록 수정하여 조회 시 정상적으로 `Presigned URL` 을 생성할 수 있도록 개선했습니다.

### **📌 2. 캐싱 유지 및 무효화 처리를 신경쓰자**

#### **💥문제 상황**
-  게시글 상세 좋아요 수와 게시글 목록 좋아요 수가 불일치하는 오류 발생
   <img width="2561" height="1398" alt="localhost_10000_community_page" src="https://github.com/user-attachments/assets/0b1fdfa1-4634-4db7-8b36-3f74e95a8037" />
   <img width="2561" height="1398" alt="localhost_10000_community_page (1)" src="https://github.com/user-attachments/assets/43dd2a92-3b13-48eb-9936-1555bd888fa6" />

#### **🔍문제 원인**

-   게시글 상세 조회 시 캐싱해 조회 성능을 개선했으나 좋아요/좋아요 취소 기능에는 **캐시 무효화 처리가 없었습니다**.

#### **✅ 해결 방안**
<img width="445" height="238" alt="image" src="https://github.com/user-attachments/assets/2497a4f0-f618-4bef-8dc1-2600d241186a" />

<br>

-  `(@Cacheable)`로 상세 조회 데이터를 캐싱하여 조회 성능을 개선했으나 좋아요/좋아요 취소 기능에는 **캐시 무효화 처리가 없었습니다**. <br>
   이를 해결하기 위해 좋아요 변경 시 **캐시 삭제하도록 `(@CacheEvict)`를 적용**해 해결했습니다.

### **📌 3. 인가처리를 명확히 하자**

#### **💥문제 상황**
-   로그인 시 기업 콘솔창으로 이동하기 실패
    <img width="1186" height="530" alt="기업회원 불러오기 실패" src="https://github.com/user-attachments/assets/15976a29-bd07-447b-b901-28c901cc93e8" />


#### **🔍문제 원인**

-   JWT 토큰으로 로그인은 됐지만, Security 설정에서 허용되지 않아 접근하려는 URL의 **권한이 맞지 않았습니다.**

#### **✅ 해결 방안**
<img width="687" height="521" alt="인가처리" src="https://github.com/user-attachments/assets/2110c68e-9a51-49ed-9b79-c9d06c623619" />

-  Spring Security의 authorizeHttpRequests 설정에서 "/enterprise-console/**" 경로에 **hasRole(UserRole.COMPANY.name()) 권한을 부여**하여, 기업 회원만 해당 경로에 접근할 수 있도록 접근 제어 문제를 해결했습니다.

<br>

## ✍️ 총평
#### ⏳ 어려웠던 부분
프로젝트를 진행하면서 기술적으로 가장 어려웠던 부분은 파일 업로드/조회, 권한 제어, 캐싱 처리 설계였습니다. <br>
특히 AWS S3 도입 과정에서는 Presigned URL 개념 이해와 null 예외 처리, S3 Key 관리가 쉽지 않았고 <br>
Spring Security 적용 단계에서는 권한 흐름이 명확하지 않아 예상치 못한 에러를 자주 마주했습니다. <br>
또한, 조회 성능 강화를 위해 캐싱을 적용했지만, 좋아요 기능과 정합성이 맞지 않는 문제가 발생해 로직을 재구성 했습니다.

#### 🛠️ 해결 방법
▶ **AWS S3 Presigned URL 문제 해결**

FileDTO 누락이 원인임을 파악하고, 게시글 파일과 매핑되는 데이터를 모두 저장하도록 로직을 수정 <br>
Presigned URL의 접근 방을 조절하며 보안과 편의성을 균형 있게 유지

▶ **Spring Security + JWT 권한 처리**

인증과 인가를 명확히 구분하고 예외 처리 핸들러를 분리 <br>
비로그인 사용자는 최소 권한으로 접근시키고, 팔로우/좋아요 기능은 role 검사로 제어

▶ **캐싱 사용 시 데이터 불일치 문제 해결**

상세 데이터만 캐싱되어 있어 좋아요 반영이 즉시 화면에 반영되지 않는 문제 발생 <br>
`@CacheEvict` 적용으로 데이터 정합성을 보장하며, 캐싱의 이점은 유지

▶ **REST 기반 비동기 처리로 사용자 경험 향상**

좋아요, 댓글, 신고 등 상태 변화 기능을 REST API로 분리 <br>
필요한 부분만 비동기로 갱신하여 페이지 새로고침 없는 UX 제공

#### ✨ 느낀 점
이번 프로젝트를 통해 단순한 CRUD 수준을 넘어 **실제로 서비스가 돌아가기 위한 백엔드 흐름** 을 깊게 이해할 수 있었습니다.  
`AWS, Security, Cache, Presigned URL, Redis` 등 실전 환경에서 자주 사용되는 기술들을 직접 적용하며,  
**문제를 피하지 않고 끝까지 해결하는 과정이 개발자의 기본 역량이라는 것**을 체감했습니다.

특히 서비스는 단순히 기능이 동작하는 것만으로는 충분하지 않으며  
**데이터 무결성과 정합성, 보안 등 여러 가지를 고려해야 진짜 서비스가 된다**는 것을 배웠습니다.  
또한 한 번에 완벽한 코드는 존재하지 않으며, **끊임없는 개선과 검증이 곧 품질**이라는 점도 느꼈습니다.

프로젝트 중도에 불의의 사고로 인해 어려움이 있었지만,
그 과정에서도 끝까지 직접 문제를 해결하며 <br>
**왜 이런 구조가 필요할까? 더 나은 방법은 뭘까?** 를 질문하는 습관이 생겼고,  
이 경험은 앞으로 더 성장할 수 있는 원동력이 되었습니다.  
앞으로는 서비스의 규모가 확장되더라도 **안정적이고 신뢰할 수 있는 서비스**를 설계할 수 있는 개발자로 계속 성장하고자 합니다.

